uniform mat4 u_MVPMatrix;
uniform mat4 u_MVMatrix;
uniform vec3 u_LightPos;
attribute vec4 position;
uniform vec4 color;
attribute vec3 normalVector;
void main()
{
    vec3 modelViewVertex = vec3(u_MVMatrix * position);
    vec3 modelViewNormal = vec3(u_MVMatrix * vec4(normalVertex, 0.0));
    float distance = length(u_LightPos - modelViewVertex);
    vec3 lightVector = normalize(u_LightPos - modelViewVertex);
    float diffuse = max(dot(modelViewNormal, lightVector), 0.1);
    diffuse = diffuse * (1.0 / (1.0 + (0.25 * distance * distance)));
    v_Color = color * diffuse;
    gl_Position = u_MVPMatrix * position;
}

